{% extends "hs_modflow/base.html" %}
{% load tethys_gizmos %}

{% block header_buttons %}
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Upload">
    {% gizmo upload_button %}
  </div>
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Save">
    {% gizmo save_button %}
  </div>
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Help">
    <a data-toggle="modal" data-target="#help-modal"><span class="glyphicon glyphicon-question-sign"></span></a>
  </div>
{% endblock %}

{% block app_content %}
  <h3>Resource ID = <span id="resourceid"></span></h3>
  <div id="filetab">
    <ul class="nav nav-tabs" id="tabs">
    </ul>
    <div class="tab-content" id="tabcontents">
    </div>
  </div>
{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
  <!-- Example Modal -->
  <div class="modal fade" id="help-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h5 class="modal-title" id="help-modal-label">Help</h5>
        </div>
        <div class="modal-body">
          <p>Start by clicking the "Upload from Hydroshare" button and enter the resource ID. Fill in the necessary information for the model and
          then click on "upload". Once the model is uploaded and the inputs are visualized, click on "Run Model" on the left side of the
          screen to run the model and see the results. Inputs can be edited and saved back to hydroshre by clicking the "Save to Hydroshare"
          button.</p>
          <p>Hydroshare models must be public resources in order to use them in the application.</p>
          </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="upload-modal" tabindex="-1" role="dialog" aria-labelledby="upload-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h5 class="modal-title" id="upload-modal-label">Model Upload from Hydroshare</h5>
        </div>
        <div class="modal-body">
          <form id="add-model-form" method="post">
            {% csrf_token %}
            {% gizmo resourceid_input %}
            {% gizmo resourcedisplay_input %}
            {% gizmo modeltype_select %}
            <div>
              <label for="favoritecheck">Add to Favorites</label>
              <input type="checkbox" id="favoritecheck" name="favoritecheck" checked>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="submit" form="add-model-form" class="btn btn-primary" name="upload-button">OK</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block app_navigation_items %}
  {{ block.super }}
  <br>
  <br>
  <div>
    {% gizmo model_select %}
  </div>
  <div>
    {% gizmo load_button %}
  </div>
  <div style="margin-top:10px">
    {% gizmo run_button %}
  </div>
  <div id="loading">
  </div>
{% endblock %}

{% block app_actions %}
{% endblock %}